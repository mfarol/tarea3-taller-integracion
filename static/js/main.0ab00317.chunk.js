(this["webpackJsonptarea3-taller-integracion"]=this["webpackJsonptarea3-taller-integracion"]||[]).push([[0],{207:function(e,t,a){e.exports=a(435)},212:function(e,t,a){},213:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},214:function(e,t,a){},242:function(e,t){},435:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(39),o=a.n(c),r=(a(212),a(177)),i=a(8),u=(a(213),a(214),a(167)),s=a.n(u),m=a(23),d=document.getElementById("status"),v=document.getElementById("close"),E=s()("wss://le-18262636.bitzonte.com",{path:"/stocks"});E.onclose=function(e){d.innerHTML="Desconectado de WebSocket."},E.onopen=function(e){d.innerHTML="Connected to: "+e.currentTarget.url};var h=[{Header:"Nombre",accessor:"ticker"},{Header:"Ultimo Precio",accessor:"value"},{Header:"Variacion Porcentual",accessor:"change"},{Header:"Alto Historico",accessor:"highest"},{Header:"Bajo Historico",accessor:"lowest"},{Header:"Volumen Total Transado",accessor:"volume"}],f=["Nombre","Volumen Compra","Volumen Venta","Volumen Total","Cantidad Acciones","Participacion de Mercado"],p=[],b=[];E.emit("STOCKS"),E.on("STOCKS",(function(e){for(var t=0;t<e.length;t++){var a={ticker:e[t].ticker,value:0,change:0,highest:0,lowest:1e6,volume:0,name:e[t].company_name};b.push(a);var n={ticker:e[t].ticker,value:[]};p.push(n)}}));var g=[];E.emit("EXCHANGES"),E.once("EXCHANGES",(function(e){for(var t in e){var a={name:e[t].name,buy:0,sell:0,total:0,quantity:e[t].listed_companies.length,participation:50,final:0,lista:e[t].listed_companies};g.push(a)}}));var k=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(p),o=Object(i.a)(c,2),u=o[0],s=o[1],d=Object(n.useState)(b),k=Object(i.a)(d,2),y=k[0],w=k[1],O=Object(n.useState)(h),S=Object(i.a)(O,2),j=S[0],H=(S[1],Object(n.useState)(g)),C=Object(i.a)(H,2),A=C[0],T=C[1],D=Object(n.useState)(f),L=Object(i.a)(D,2),V=L[0];return L[1],Object(n.useEffect)((function(){E.on("UPDATE",(function(e){a((function(t){return[].concat(Object(r.a)(t),[e])}));for(var t=u,n=0;n<t.length;n++)if(t[n].ticker==e.ticker){var l=new Date(e.time).toLocaleString("es-CL");t[n].value.push({value:e.value,time:l})}s(t);var c=y;for(n=0;n<c.length;n++)e.ticker==c[n].ticker&&(c[n].change=100*(c[n].value/e.value-1),c[n].value=e.value,e.value>c[n].highest&&(c[n].highest=e.value),e.value<c[n].lowest&&(c[n].lowest=e.value));w(c),console.log(c)})),E.on("BUY",(function(e){for(var t=y,a=A,n=0;n<t.length;n++)if(e.ticker==t[n].ticker){t[n].volume+=e.volume;for(var l=0;l<a.length;l++){a[l].lista.includes(t[n].name)&&(a[l].buy+=e.volume,a[l].total+=e.volume),a[l].final+=e.volume,a[l].participation=a[l].total/a[l].final*100}}w(t),T(a)})),E.on("SELL",(function(e){for(var t=y,a=A,n=0;n<t.length;n++)if(e.ticker==t[n].ticker){t[n].volume+=e.volume;for(var l=0;l<a.length;l++){a[l].lista.includes(t[n].name)&&(a[l].sell+=e.volume,a[l].total+=e.volume),a[l].final+=e.volume,a[l].participation=a[l].total/a[l].final*100}}w(t),T(a)}))}),[]),v.onclick=function(e){return e.preventDefault(),E.close(),!1},l.a.createElement("div",{className:"App"},l.a.createElement("div",{id:"botones"},l.a.createElement("div",{id:"status"},"Conectado al Websocket"),l.a.createElement("button",{type:"button",id:"close"},"Desconectarse del Websocket"),l.a.createElement("button",{type:"button",onClick:"window.location.reload();"},"Conectarse al Websocket")),l.a.createElement("div",null,l.a.createElement("h1",{"text-align":"center"},"Acciones"),l.a.createElement("h2",null,"Mercados de Valores"),l.a.createElement("table",{id:"exchange"},l.a.createElement("thead",null,l.a.createElement("tr",null,V.map((function(e,t){return l.a.createElement("th",{key:t},e)})))),l.a.createElement("tbody",null,A.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.buy),l.a.createElement("td",null,e.sell),l.a.createElement("td",null,e.total),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.participation))})))),l.a.createElement("br",null),l.a.createElement("h2",null,"Acciones"),l.a.createElement("table",{id:"stocks"},l.a.createElement("thead",null,l.a.createElement("tr",null,j.map((function(e,t){return l.a.createElement("th",{key:t},e.Header)})))),l.a.createElement("tbody",null,y.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.ticker),l.a.createElement("td",null,e.value),l.a.createElement("td",null,e.change),l.a.createElement("td",null,e.highest),l.a.createElement("td",null,e.lowest),l.a.createElement("td",null,e.volume))})))),u.map((function(e){return l.a.createElement("div",null,l.a.createElement("h2",null,e.ticker),l.a.createElement(m.c,{key:Math.random(),width:500,height:300,data:e.value},l.a.createElement(m.e,{dataKey:"time"}),l.a.createElement(m.f,{label:{value:"Precio",position:"insideLeft",angle:-90}}),l.a.createElement(m.a,{stroke:"#eee",strokeDasharray:"5 5"}),l.a.createElement(m.b,{dataKey:"value",type:"monotone",stroke:"#82ca9d",activeDot:{r:8},isAnimationActive:!1}),l.a.createElement(m.d,null)))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[207,1,2]]]);
//# sourceMappingURL=main.0ab00317.chunk.js.map